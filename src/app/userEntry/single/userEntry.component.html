<div class="container">
  <app-header-title [showBack]=1 [isDialog]="isDialog" [title]="'UserEntry'" [icon]="'credit_card'"></app-header-title>
  <mat-accordion>
    <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>attach_money</mat-icon>
        </mat-panel-title>
        <mat-panel-description>
          {{'UserEntry' | translate}}
        </mat-panel-description>
      </mat-expansion-panel-header>





      <mat-horizontal-stepper [linear]="true" #stepper="matHorizontalStepper">
        <mat-step [stepControl]="formGroup1">
          <form [formGroup]="formGroup1" novalidate (ngSubmit)="save()">
            <mat-form-field>
              <input matInput [matDatepicker]="picker" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedUserEntry.dateUserEntry" placeholder="Date de la tournée">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
            <app-autocomplete [title]="'Tours'" [singleChoice]=true [typeAutocomplete]="'tour'" [arrayContent]="fetchedUserEntry.tours">
            </app-autocomplete>
            <button mat-button matStepperNext>Suivant</button>
          </form>
        </mat-step>
        <mat-step [stepControl]="formGroup2">
          <form novalidate [formGroup]="formGroup2" (ngSubmit)="save()">
            <mat-form-field>
              <input matInput type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedUserEntry.info1" placeholder="Bordereau">
            </mat-form-field>
            <mat-form-field>
              <input matInput type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedUserEntry.info2" placeholder="PPI">
            </mat-form-field>
            <mat-form-field>
              <input matInput type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedUserEntry.info3" placeholder="Emport">
            </mat-form-field>
            <div>
              <button mat-button matStepperPrevious>précédent</button>
              <button mat-button matStepperNext>Suivant</button>
            </div>
          </form>
        </mat-step>
        <mat-step [stepControl]="formGroup3">
          <form novalidate [formGroup]="formGroup3" (ngSubmit)="save()">
            <mat-form-field>
              <input matInput type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedUserEntry.info4" placeholder="AV">
            </mat-form-field>
            <mat-form-field>
              <input matInput type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedUserEntry.info5" placeholder="DRP">
            </mat-form-field>
            <mat-form-field>
              <input matInput type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedUserEntry.info6" placeholder="DRC">
            </mat-form-field>
            <mat-form-field>
              <input matInput type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedUserEntry.info7" placeholder="RDI">
            </mat-form-field>
            <div>
              <button mat-button matStepperPrevious>précédent</button>
              <button mat-button matStepperNext>Suivant</button>
            </div>
          </form>
        </mat-step>
        <mat-step [stepControl]="formGroup4">
          <form novalidate [formGroup]="formGroup4" (ngSubmit)="save()">
            <mat-form-field>
              <textarea matInput type="text" rows="4" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedUserEntry.info8" placeholder="Commentaires"></textarea>
            </mat-form-field>
            <div>
              <button mat-button matStepperPrevious>précédent</button>
              <button mat-button matStepperNext>Suivant</button>
            </div>
          </form>
        </mat-step>
        <mat-step [stepControl]="formGroup5">
          <form novalidate [formGroup]="formGroup5" (ngSubmit)="save()">
            <mat-form-field>
              <input matInput type="time" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedUserEntry.info9" placeholder="Heure de prise de poste">
            </mat-form-field>
            <mat-form-field>
              <input matInput atp-time-picker type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedUserEntry.info10" placeholder="Heure de pose">
            </mat-form-field>
            <mat-form-field>
              <input matInput atp-time-picker type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedUserEntry.info11" placeholder="Heure de reprise">
            </mat-form-field>
            <mat-form-field>
              <input matInput type="text" atp-time-picker [ngModelOptions]="{standalone: true}" [(ngModel)]="fetchedUserEntry.info12" placeholder="Heure de fin de poste">
            </mat-form-field>
            <div>
              <button mat-button matStepperPrevious>précédent</button>
              <button mat-button matStepperNext>Suivant</button>
            </div>
          </form>
        </mat-step>
        <mat-step>
          Les données journalières ont bien été enregistrées.
          <div>
            <button mat-button matStepperPrevious>précédent</button>
          </div>
        </mat-step>
      </mat-horizontal-stepper>
      <mat-action-row *ngIf="search.isInDialog">
        <div class="spaceBetween width100perc">
          <div>
            <button *ngIf="fetchedUserEntry._id" mat-mini-fab color="warn" (click)="openDialogDelete()">
              <mat-icon aria-label="delete">delete</mat-icon>
            </button>
          </div>
          <button mat-mini-fab color="primary" (click)="nextStep()">
            <mat-icon aria-label="Next">forward</mat-icon>
          </button>
        </div>
      </mat-action-row>
    </mat-expansion-panel>
  </mat-accordion>
</div>
